(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageA/tirePressure/gps"],{"0977":function(t,e,a){"use strict";(function(t,e){var n=a("4ea4");a("34b8");n(a("66fd"));var i=n(a("f4c8"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(i.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"47f8":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(a("b5d5"));var i=a("ac32"),s={data:function(){return{id:0,dateShow:!1,title:"map",loadFinish:!0,date:Number(new Date),latitude:39.909,longitude:116.39742,visible:!1,beginTime:"",endTime:"",action:"begin",covers:[],lastMaker:{},secondMaker:{}}},mounted:function(){},onLoad:function(t){this.vehicleId=t.item,this.loadLastData()},methods:{loadData:function(){var t=this,e={vehicleId:this.vehicleId,startTime:this.beginTime,endTime:this.endTime};(0,i.getGpsInfo)(e).then((function(e){if(200==e.code)if(e.data.items&&e.data.items.length>0){var a=e.data.items.pop(),n=t.formateDate(a.gpsReportDate);t.id+=1;var i="<div class='callout'><div><span>车牌号</span><span class='l'>".concat(a.vehicleNo,"</span></div><div><span>设备ID</span><span class='l'>").concat(a.vehicleId,"</span></div><div><span>电源</span><span class='l'>").concat(a.gpsPowerTypeDesc,"</span></div><div><span>掉电状态</span><span class='l'>").concat(a.gpsPowerStateDesc,"</span></div><div><span>日期</span><span class='l'>").concat(n,"</span></div></div>"),s={id:t.id,latitude:a.latitude,longitude:a.longitude,iconPath:"../../static/tirePressure/location.png",callout:{content:i,borderRadius:5,display:"BYCLICK",padding:7,bgColor:"#FFFFFF"}},c=[];c.push(t.covers[0]),c.push(s),t.covers=c}else t.$refs.uToast.show({message:"没有相关数据"})}))},loadLastData:function(){var t=this,e={vehicleId:this.vehicleId};(0,i.getLastGpsInfo)(e).then((function(e){if(200==e.code){t.latitude=e.data.latitude,t.longitude=e.data.longitude;var a=t.formateDate(e.data.gpsReportDate),n="<div class='callout'><div><span>车牌号</span><span class='l'>".concat(e.data.vehicleNo,"</span></div><div><span>设备ID</span><span class='l'>").concat(e.data.vehicleId,"</span></div><div><span>电源</span><span class='l'>").concat(e.data.gpsPowerTypeDesc,"</span></div><div><span>掉电状态</span><span class='l'>").concat(e.data.gpsPowerStateDesc,"</span></div><div><span>日期</span><span class='l'>").concat(a,"</span></div></div>"),i={id:t.id,latitude:e.data.latitude,longitude:e.data.longitude,iconPath:"../../static/tirePressure/location.png",callout:{content:n,borderRadius:5,display:"BYCLICK",padding:7,bgColor:"#FFFFFF"}};t.lastMaker=i,t.covers.push(i)}}))},formateDate2:function(t){function e(t){return t<10?"0".concat(t):t}var a=new Date(t),n=a.getFullYear(),i=a.getMonth()+1,s=a.getDate();return"".concat(n,"-").concat(e(i),"-").concat(e(s))},formateDate:function(t){function e(t){return t<10?"0".concat(t):t}var a=new Date(t),n=a.getFullYear(),i=a.getMonth()+1,s=a.getDate(),c=a.getHours(),o=a.getMinutes(),d=a.getSeconds();return"".concat(n,"-").concat(e(i),"-").concat(e(s)," ").concat(e(c),":").concat(e(o),":").concat(e(d))},begin:function(){this.action="begin",this.dateShow=!0},end:function(){this.action="end",this.dateShow=!0},confirm:function(t){this.dateShow=!1,"begin"==this.action&&(this.beginTime=t.value),"end"==this.action&&(this.endTime=t.value),this.beginTime&&this.endTime&&this.loadData()},getMarker:function(t){}}};e.default=s},"68b0":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var n={uToast:function(){return a.e("uni_modules/uview-ui/components/u-toast/u-toast").then(a.bind(null,"e627"))},uDatetimePicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(a.bind(null,"541a"))}},i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.beginTime?t.formateDate2(t.beginTime):null),n=t.endTime?t.formateDate2(t.endTime):null;t._isMounted||(t.e0=function(e){t.dateShow=!1}),t.$mp.data=Object.assign({},{$root:{m0:a,m1:n}})},s=[]},c18c:function(t,e,a){"use strict";var n=a("f794"),i=a.n(n);i.a},f4c8:function(t,e,a){"use strict";a.r(e);var n=a("68b0"),i=a("f81f");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("c18c");var c=a("f0c5"),o=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=o.exports},f794:function(t,e,a){},f81f:function(t,e,a){"use strict";a.r(e);var n=a("47f8"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a}},[["0977","common/runtime","common/vendor"]]]);